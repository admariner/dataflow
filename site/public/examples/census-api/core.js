function _t(e){let t=document.createElement("template");return t.innerHTML=e,document.importNode(t.content,!0)}function bt(e){let t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.innerHTML=e,t}var vt=Object.assign(ye(_t,e=>{if(e.firstChild===null)return null;if(e.firstChild===e.lastChild)return e.removeChild(e.firstChild);let t=document.createElement("span");return t.appendChild(e),t}),{fragment:ye(_t,e=>e)}),wt=Object.assign(ye(bt,e=>e.firstChild===null?null:e.firstChild===e.lastChild?e.removeChild(e.firstChild):e),{fragment:ye(bt,e=>{let t=document.createDocumentFragment();for(;e.firstChild;)t.appendChild(e.firstChild);return t})}),Hr=9,Gr=10,Wr=12,Yr=13,zr=32,Vr=65,Xr=90,Qr=97,Kr=122,xe=60,x=62,P=47,S=45,Ie=33,Ue=61,gt=34,Et=39,Zr=63,g=1,yt=2,xt=3,Fe=4,Te=5,D=6,$e=7,Ae=8,Ce=9,Be=10,He=11,Se=12,Ge=13,re=14,Tt=15,At=16,L=17,Ct=18,St=19,Nt=20,Ot=21,We=22,ne=23,kt=24,Lt=25,N=26,Mt=27,jt=28,Pt=29,Jr=128,Dt=1,en=8,tn=1,qt="http://www.w3.org/2000/svg",$="http://www.w3.org/1999/xlink",Rt="http://www.w3.org/XML/1998/namespace",It="http://www.w3.org/2000/xmlns/",Ut=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),Ne=new Map([["xlink:actuate",$],["xlink:arcrole",$],["xlink:href",$],["xlink:role",$],["xlink:show",$],["xlink:title",$],["xlink:type",$],["xml:lang",Rt],["xml:space",Rt],["xmlns",It],["xmlns:xlink",It]]);function ye(e,t){return function({raw:r}){let n=g,i="",s,o,a,f,c=0;for(let m=0,w=arguments.length;m<w;++m){let h=r[m];if(m>0){let l=arguments[m];switch(n){case N:{if(l!=null){let b=l+"";if(Ft(o))i+=b.replace(/[<]/g,K);else{if(new RegExp(`</${o}[\\s>/]`,"i").test(i.slice(-o.length-2)+b))throw new Error("unsafe raw text");i+=b}}break}case g:{l==null||(l instanceof Node||typeof l!="string"&&l[Symbol.iterator]||/(?:^|>)$/.test(r[m-1])&&/^(?:<|$)/.test(h)?(i+="<!--::"+m+"-->",c|=Jr):i+=(l+"").replace(/[<&]/g,K));break}case Ce:{n=Se;let b;if(/^[\s>]/.test(h)){if(l==null||l===!1){i=i.slice(0,a-r[m-1].length);break}if(l===!0||(b=l+"")===""){i+="''";break}if(r[m-1].slice(a,f)==="style"&&Ye(l)||typeof l=="function"){i+="::"+m,c|=Dt;break}}if(b===void 0&&(b=l+""),b==="")throw new Error("unsafe unquoted empty string");i+=b.replace(/^['"]|[\s>&]/g,K);break}case Se:{i+=(l+"").replace(/[\s>&]/g,K);break}case He:{i+=(l+"").replace(/['&]/g,K);break}case Be:{i+=(l+"").replace(/["&]/g,K);break}case D:{if(Ye(l)){i+="::"+m+"=''",c|=Dt;break}throw new Error("invalid binding")}case L:break;default:throw new Error("invalid binding")}}for(let l=0,b=h.length;l<b;++l){let u=h.charCodeAt(l);switch(n){case g:{u===xe&&(n=yt);break}case yt:{u===Ie?n=Lt:u===P?n=xt:Oe(u)?(s=l,o=void 0,n=Fe,--l):u===Zr?(n=Te,--l):(n=g,--l);break}case xt:{Oe(u)?(n=Fe,--l):u===x?n=g:(n=Te,--l);break}case Fe:{q(u)?(n=D,o=oe(h,s,l)):u===P?n=re:u===x&&(o=oe(h,s,l),n=ie(o)?N:g);break}case D:{q(u)||(u===P||u===x?(n=$e,--l):u===Ue?(n=Ae,a=l+1,f=void 0):(n=Ae,--l,a=l+1,f=void 0));break}case Ae:{q(u)||u===P||u===x?(n=$e,--l,f=l):u===Ue&&(n=Ce,f=l);break}case $e:{q(u)||(u===P?n=re:u===Ue?n=Ce:u===x?n=ie(o)?N:g:(n=Ae,--l,a=l+1,f=void 0));break}case Ce:{q(u)||(u===gt?n=Be:u===Et?n=He:u===x?n=ie(o)?N:g:(n=Se,--l));break}case Be:{u===gt&&(n=Ge);break}case He:{u===Et&&(n=Ge);break}case Se:{q(u)?n=D:u===x&&(n=ie(o)?N:g);break}case Ge:{q(u)?n=D:u===P?n=re:u===x?n=ie(o)?N:g:(n=D,--l);break}case re:{u===x?n=g:(n=D,--l);break}case Te:{u===x&&(n=g);break}case Tt:{u===S?n=At:u===x?n=g:(n=L,--l);break}case At:{u===S?n=ne:u===x?n=g:(n=L,--l);break}case L:{u===xe?n=Ct:u===S&&(n=We);break}case Ct:{u===Ie?n=St:u!==xe&&(n=L,--l);break}case St:{u===S?n=Nt:(n=L,--l);break}case Nt:{u===S?n=Ot:(n=ne,--l);break}case Ot:{n=ne,--l;break}case We:{u===S?n=ne:(n=L,--l);break}case ne:{u===x?n=g:u===Ie?n=kt:u!==S&&(n=L,--l);break}case kt:{u===S?n=We:u===x?n=g:(n=L,--l);break}case Lt:{u===S&&h.charCodeAt(l+1)===S?(n=Tt,++l):(n=Te,--l);break}case N:{u===xe&&(n=Mt);break}case Mt:{u===P?n=jt:(n=N,--l);break}case jt:{Oe(u)?(s=l,n=Pt,--l):(n=N,--l);break}case Pt:{q(u)&&o===oe(h,s,l)?n=D:u===P&&o===oe(h,s,l)?n=re:u===x&&o===oe(h,s,l)?n=g:Oe(u)||(n=N,--l);break}default:{n=void 0;break}}}i+=h}let p=e(i),d=document.createTreeWalker(p,c,null,!1),_=[];for(;d.nextNode();){let m=d.currentNode;switch(m.nodeType){case tn:{let w=m.attributes;for(let h=0,l=w.length;h<l;++h){let{name:b,value:u}=w[h];if(/^::/.test(b)){let Q=arguments[+b.slice(2)];$t(m,b),--h,--l;for(let te in Q){let j=Q[te];j==null||j===!1||(typeof j=="function"?m[te]=j:te==="style"&&Ye(j)?Bt(m[te],j):rn(m,te,j===!0?"":j))}}else if(/^::/.test(u)){let Q=arguments[+u.slice(2)];$t(m,b),--h,--l,typeof Q=="function"?m[b]=Q:Bt(m[b],Q)}}break}case en:{if(/^::/.test(m.data)){let w=m.parentNode,h=arguments[+m.data.slice(2)];if(h instanceof Node)w.insertBefore(h,m);else if(typeof h!="string"&&h[Symbol.iterator])if(h instanceof NodeList||h instanceof HTMLCollection)for(let l=h.length-1,b=m;l>=0;--l)b=w.insertBefore(h[l],b);else for(let l of h)l!=null&&w.insertBefore(l instanceof Node?l:document.createTextNode(l),m);else w.insertBefore(document.createTextNode(h),m);_.push(m)}break}}}for(let m of _)m.parentNode.removeChild(m);return t(p)}}function K(e){return`&#${e.charCodeAt(0).toString()};`}function Oe(e){return Vr<=e&&e<=Xr||Qr<=e&&e<=Kr}function q(e){return e===Hr||e===Gr||e===Wr||e===zr||e===Yr}function Ye(e){return e&&e.toString===Object.prototype.toString}function ie(e){return e==="script"||e==="style"||Ft(e)}function Ft(e){return e==="textarea"||e==="title"}function oe(e,t,r){return e.slice(t,r).toLowerCase()}function rn(e,t,r){if(e.namespaceURI===qt&&(t=t.toLowerCase(),t=Ut.get(t)||t,Ne.has(t))){e.setAttributeNS(Ne.get(t),t,r);return}e.setAttribute(t,r)}function $t(e,t){if(e.namespaceURI===qt&&(t=t.toLowerCase(),t=Ut.get(t)||t,Ne.has(t))){e.removeAttributeNS(Ne.get(t),t);return}e.removeAttribute(t)}function Bt(e,t){for(let r in t){let n=t[r];r.startsWith("--")?e.setProperty(r,n):e[r]=n}}function R(e,t,r){r=r||{};var n=e.ownerDocument,i=n.defaultView.CustomEvent;typeof i=="function"?i=new i(t,{detail:r}):(i=n.createEvent("Event"),i.initEvent(t,!1,!1),i.detail=r),e.dispatchEvent(i)}function ke(e){return Array.isArray(e)||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function Le(e){return e===(e|0)+""}function E(e){let t=document.createElement("span");return t.className="observablehq--cellname",t.textContent=`${e} = `,t}var nn=Symbol.prototype.toString;function O(e){return nn.call(e)}var{getOwnPropertySymbols:on,prototype:{hasOwnProperty:sn}}=Object,{toStringTag:an}=Symbol,ze={},B=on;function Z(e,t){return sn.call(e,t)}function se(e){return e[an]||e.constructor&&e.constructor.name||"Object"}function T(e,t){try{let r=e[t];return r&&r.constructor,r}catch(r){return ze}}var ln=[{symbol:"@@__IMMUTABLE_INDEXED__@@",name:"Indexed",modifier:!0},{symbol:"@@__IMMUTABLE_KEYED__@@",name:"Keyed",modifier:!0},{symbol:"@@__IMMUTABLE_LIST__@@",name:"List",arrayish:!0},{symbol:"@@__IMMUTABLE_MAP__@@",name:"Map"},{symbol:"@@__IMMUTABLE_ORDERED__@@",name:"Ordered",modifier:!0,prefix:!0},{symbol:"@@__IMMUTABLE_RECORD__@@",name:"Record"},{symbol:"@@__IMMUTABLE_SET__@@",name:"Set",arrayish:!0,setish:!0},{symbol:"@@__IMMUTABLE_STACK__@@",name:"Stack",arrayish:!0}];function Me(e){try{let t=ln.filter(({symbol:o})=>e[o]===!0);if(!t.length)return;let r=t.find(o=>!o.modifier),n=r.name==="Map"&&t.find(o=>o.modifier&&o.prefix),i=t.some(o=>o.arrayish),s=t.some(o=>o.setish);return{name:`${n?n.name:""}${r.name}`,symbols:t,arrayish:i&&!s,setish:s}}catch(t){return null}}var{getPrototypeOf:Ve,getOwnPropertyDescriptors:un}=Object,Ht=Ve({});function le(e,t,r,n){let i=ke(e),s,o,a,f;e instanceof Map?e instanceof e.constructor?(s=`Map(${e.size})`,o=cn):(s="Map()",o=ae):e instanceof Set?e instanceof e.constructor?(s=`Set(${e.size})`,o=fn):(s="Set()",o=ae):i?(s=`${e.constructor.name}(${e.length})`,o=pn):(f=Me(e))?(s=`Immutable.${f.name}${f.name==="Record"?"":`(${e.size})`}`,i=f.arrayish,o=f.arrayish?mn:f.setish?dn:_n):n?(s=se(e),o=hn):(s=se(e),o=ae);let c=document.createElement("span");c.className="observablehq--expanded",r&&c.appendChild(E(r));let p=c.appendChild(document.createElement("a"));p.innerHTML=`<svg width=8 height=8 class='observablehq--caret'>
    <path d='M4 7L0 1h8z' fill='currentColor' />
  </svg>`,p.appendChild(document.createTextNode(`${s}${i?" [":" {"}`)),p.addEventListener("mouseup",function(d){d.stopPropagation(),H(c,J(e,null,r,n))}),o=o(e);for(let d=0;!(a=o.next()).done&&d<20;++d)c.appendChild(a.value);if(!a.done){let d=c.appendChild(document.createElement("a"));d.className="observablehq--field",d.style.display="block",d.appendChild(document.createTextNode("  \u2026 more")),d.addEventListener("mouseup",function(_){_.stopPropagation(),c.insertBefore(a.value,c.lastChild.previousSibling);for(let m=0;!(a=o.next()).done&&m<19;++m)c.insertBefore(a.value,c.lastChild.previousSibling);a.done&&c.removeChild(c.lastChild.previousSibling),R(c,"load")})}return c.appendChild(document.createTextNode(i?"]":"}")),c}function*cn(e){for(let[t,r]of e)yield bn(t,r);yield*ae(e)}function*fn(e){for(let t of e)yield Gt(t);yield*ae(e)}function*dn(e){for(let t of e)yield Gt(t)}function*pn(e){for(let t=0,r=e.length;t<r;++t)t in e&&(yield M(t,T(e,t),"observablehq--index"));for(let t in e)!Le(t)&&Z(e,t)&&(yield M(t,T(e,t),"observablehq--key"));for(let t of B(e))yield M(O(t),T(e,t),"observablehq--symbol")}function*mn(e){let t=0;for(let r=e.size;t<r;++t)yield M(t,e.get(t),!0)}function*hn(e){for(let r in un(e))yield M(r,T(e,r),"observablehq--key");for(let r of B(e))yield M(O(r),T(e,r),"observablehq--symbol");let t=Ve(e);t&&t!==Ht&&(yield Wt(t))}function*ae(e){for(let r in e)Z(e,r)&&(yield M(r,T(e,r),"observablehq--key"));for(let r of B(e))yield M(O(r),T(e,r),"observablehq--symbol");let t=Ve(e);t&&t!==Ht&&(yield Wt(t))}function*_n(e){for(let[t,r]of e)yield M(t,r,"observablehq--key")}function Wt(e){let t=document.createElement("div"),r=t.appendChild(document.createElement("span"));return t.className="observablehq--field",r.className="observablehq--prototype-key",r.textContent="  <prototype>",t.appendChild(document.createTextNode(": ")),t.appendChild(v(e,void 0,void 0,void 0,!0)),t}function M(e,t,r){let n=document.createElement("div"),i=n.appendChild(document.createElement("span"));return n.className="observablehq--field",i.className=r,i.textContent=`  ${e}`,n.appendChild(document.createTextNode(": ")),n.appendChild(v(t)),n}function bn(e,t){let r=document.createElement("div");return r.className="observablehq--field",r.appendChild(document.createTextNode("  ")),r.appendChild(v(e)),r.appendChild(document.createTextNode(" => ")),r.appendChild(v(t)),r}function Gt(e){let t=document.createElement("div");return t.className="observablehq--field",t.appendChild(document.createTextNode("  ")),t.appendChild(v(e)),t}function Yt(e){let t=window.getSelection();return t.type==="Range"&&(t.containsNode(e,!0)||t.anchorNode.isSelfOrDescendant(e)||t.focusNode.isSelfOrDescendant(e))}function J(e,t,r,n){let i=ke(e),s,o,a,f;if(e instanceof Map?e instanceof e.constructor?(s=`Map(${e.size})`,o=vn):(s="Map()",o=ue):e instanceof Set?e instanceof e.constructor?(s=`Set(${e.size})`,o=wn):(s="Set()",o=ue):i?(s=`${e.constructor.name}(${e.length})`,o=yn):(f=Me(e))?(s=`Immutable.${f.name}${f.name==="Record"?"":`(${e.size})`}`,i=f.arrayish,o=f.arrayish?En:f.setish?gn:xn):(s=se(e),o=ue),t){let d=document.createElement("span");return d.className="observablehq--shallow",r&&d.appendChild(E(r)),d.appendChild(document.createTextNode(s)),d.addEventListener("mouseup",function(_){Yt(d)||(_.stopPropagation(),H(d,J(e)))}),d}let c=document.createElement("span");c.className="observablehq--collapsed",r&&c.appendChild(E(r));let p=c.appendChild(document.createElement("a"));p.innerHTML=`<svg width=8 height=8 class='observablehq--caret'>
    <path d='M7 4L1 8V0z' fill='currentColor' />
  </svg>`,p.appendChild(document.createTextNode(`${s}${i?" [":" {"}`)),c.addEventListener("mouseup",function(d){Yt(c)||(d.stopPropagation(),H(c,le(e,null,r,n)))},!0),o=o(e);for(let d=0;!(a=o.next()).done&&d<20;++d)d>0&&c.appendChild(document.createTextNode(", ")),c.appendChild(a.value);return a.done||c.appendChild(document.createTextNode(", \u2026")),c.appendChild(document.createTextNode(i?"]":"}")),c}function*vn(e){for(let[t,r]of e)yield Tn(t,r);yield*ue(e)}function*wn(e){for(let t of e)yield v(t,!0);yield*ue(e)}function*gn(e){for(let t of e)yield v(t,!0)}function*En(e){let t=-1,r=0;for(let n=e.size;r<n;++r)r>t+1&&(yield je(r-t-1)),yield v(e.get(r),!0),t=r;r>t+1&&(yield je(r-t-1))}function*yn(e){let t=-1,r=0;for(let n=e.length;r<n;++r)r in e&&(r>t+1&&(yield je(r-t-1)),yield v(T(e,r),!0),t=r);r>t+1&&(yield je(r-t-1));for(let n in e)!Le(n)&&Z(e,n)&&(yield ce(n,T(e,n),"observablehq--key"));for(let n of B(e))yield ce(O(n),T(e,n),"observablehq--symbol")}function*ue(e){for(let t in e)Z(e,t)&&(yield ce(t,T(e,t),"observablehq--key"));for(let t of B(e))yield ce(O(t),T(e,t),"observablehq--symbol")}function*xn(e){for(let[t,r]of e)yield ce(t,r,"observablehq--key")}function je(e){let t=document.createElement("span");return t.className="observablehq--empty",t.textContent=e===1?"empty":`empty \xD7 ${e}`,t}function ce(e,t,r){let n=document.createDocumentFragment(),i=n.appendChild(document.createElement("span"));return i.className=r,i.textContent=e,n.appendChild(document.createTextNode(": ")),n.appendChild(v(t,!0)),n}function Tn(e,t){let r=document.createDocumentFragment();return r.appendChild(v(e,!0)),r.appendChild(document.createTextNode(" => ")),r.appendChild(v(t,!0)),r}function A(e,t){var r=e+"",n=r.length;return n<t?new Array(t-n+1).join(0)+r:r}function An(e){return e.getUTCMilliseconds()===0&&e.getUTCSeconds()===0&&e.getUTCMinutes()===0&&e.getUTCHours()===0}function zt(e){return e<0?"-"+A(-e,6):e>9999?"+"+A(e,6):A(e,4)}function Xe(e){return isNaN(e)?"Invalid Date":An(e)?zt(e.getUTCFullYear())+"-"+A(e.getUTCMonth()+1,2)+"-"+A(e.getUTCDate(),2):zt(e.getFullYear())+"-"+A(e.getMonth()+1,2)+"-"+A(e.getDate(),2)+"T"+A(e.getHours(),2)+":"+A(e.getMinutes(),2)+(e.getMilliseconds()?":"+A(e.getSeconds(),2)+"."+A(e.getMilliseconds(),3):e.getSeconds()?":"+A(e.getSeconds(),2):"")}var Cn=Error.prototype.toString;function Qe(e){return e.stack||Cn.call(e)}var Sn=RegExp.prototype.toString;function Ke(e){return Sn.call(e)}var Ze=20;function Je(e,t,r,n){if(t===!1){if(Xt(e,/["\n]/g)<=Xt(e,/`|\${/g)){let c=document.createElement("span");n&&c.appendChild(E(n));let p=c.appendChild(document.createElement("span"));return p.className="observablehq--string",p.textContent=JSON.stringify(e),c}let o=e.split(`
`);if(o.length>Ze&&!r){let c=document.createElement("div");n&&c.appendChild(E(n));let p=c.appendChild(document.createElement("span"));p.className="observablehq--string",p.textContent="`"+Vt(o.slice(0,Ze).join(`
`));let d=c.appendChild(document.createElement("span")),_=o.length-Ze;return d.textContent=`Show ${_} truncated line${_>1?"s":""}`,d.className="observablehq--string-expand",d.addEventListener("mouseup",function(m){m.stopPropagation(),H(c,v(e,t,!0,n))}),c}let a=document.createElement("span");n&&a.appendChild(E(n));let f=a.appendChild(document.createElement("span"));return f.className=`observablehq--string${r?" observablehq--expanded":""}`,f.textContent="`"+Vt(e)+"`",a}let i=document.createElement("span");n&&i.appendChild(E(n));let s=i.appendChild(document.createElement("span"));return s.className="observablehq--string",s.textContent=JSON.stringify(e.length>100?`${e.slice(0,50)}\u2026${e.slice(-49)}`:e),i}function Vt(e){return e.replace(/[\\`\x00-\x09\x0b-\x19]|\${/g,Nn)}function Nn(e){var t=e.charCodeAt(0);switch(t){case 8:return"\\b";case 9:return"\\t";case 11:return"\\v";case 12:return"\\f";case 13:return"\\r"}return t<16?"\\x0"+t.toString(16):t<32?"\\x"+t.toString(16):"\\"+e}function Xt(e,t){for(var r=0;t.exec(e);)++r;return r}var On=Function.prototype.toString,kn={prefix:"async \u0192"},Ln={prefix:"async \u0192*"},Qt={prefix:"class"},Mn={prefix:"\u0192"},jn={prefix:"\u0192*"};function et(e,t){var r,n,i=On.call(e);switch(e.constructor&&e.constructor.name){case"AsyncFunction":r=kn;break;case"AsyncGeneratorFunction":r=Ln;break;case"GeneratorFunction":r=jn;break;default:r=/^class\b/.test(i)?Qt:Mn;break}return r===Qt?fe(r,"",t):(n=/^(?:async\s*)?(\w+)\s*=>/.exec(i))?fe(r,"("+n[1]+")",t):(n=/^(?:async\s*)?\(\s*(\w+(?:\s*,\s*\w+)*)?\s*\)/.exec(i))?fe(r,n[1]?"("+n[1].replace(/\s*,\s*/g,", ")+")":"()",t):(n=/^(?:async\s*)?function(?:\s*\*)?(?:\s*\w+)?\s*\(\s*(\w+(?:\s*,\s*\w+)*)?\s*\)/.exec(i))?fe(r,n[1]?"("+n[1].replace(/\s*,\s*/g,", ")+")":"()",t):fe(r,"(\u2026)",t)}function fe(e,t,r){var n=document.createElement("span");n.className="observablehq--function",r&&n.appendChild(E(r));var i=n.appendChild(document.createElement("span"));return i.className="observablehq--keyword",i.textContent=e.prefix,n.appendChild(document.createTextNode(t)),n}var{prototype:{toString:Pn}}=Object;function v(e,t,r,n,i){let s=typeof e;switch(s){case"boolean":case"undefined":{e+="";break}case"number":{e=e===0&&1/e<0?"-0":e+"";break}case"bigint":{e=e+"n";break}case"symbol":{e=O(e,n);break}case"function":return et(e,n);case"string":return Je(e,t,r,n);default:{if(e===null){s=null,e="null";break}if(e instanceof Date){s="date",e=Xe(e,n);break}if(e===ze){s="forbidden",e="[forbidden]";break}switch(Pn.call(e)){case"[object RegExp]":{s="regexp",e=Ke(e,n);break}case"[object Error]":case"[object DOMException]":{s="error",e=Qe(e,n);break}default:return(r?le:J)(e,t,n,i)}break}}let o=document.createElement("span");n&&o.appendChild(E(n));let a=o.appendChild(document.createElement("span"));return a.className=`observablehq--${s}`,a.textContent=e,o}function H(e,t){e.classList.contains("observablehq--inspect")&&t.classList.add("observablehq--inspect"),e.parentNode.replaceChild(t,e),R(t,"load")}var Dn=/\s+\(\d+:\d+\)$/m,de=class{constructor(t){if(!t)throw new Error("invalid node");this._node=t,t.classList.add("observablehq")}pending(){let{_node:t}=this;t.classList.remove("observablehq--error"),t.classList.add("observablehq--running")}fulfilled(t,r){let{_node:n}=this;if((!(t instanceof Element||t instanceof Text)||t.parentNode&&t.parentNode!==n)&&(t=v(t,!1,n.firstChild&&n.firstChild.classList&&n.firstChild.classList.contains("observablehq--expanded"),r),t.classList.add("observablehq--inspect")),n.classList.remove("observablehq--running","observablehq--error"),n.firstChild!==t)if(n.firstChild){for(;n.lastChild!==n.firstChild;)n.removeChild(n.lastChild);n.replaceChild(t,n.firstChild)}else n.appendChild(t);R(n,"update")}rejected(t,r){let{_node:n}=this;for(n.classList.remove("observablehq--running"),n.classList.add("observablehq--error");n.lastChild;)n.removeChild(n.lastChild);var i=document.createElement("div");i.className="observablehq--inspect",r&&i.appendChild(E(r)),i.appendChild(document.createTextNode((t+"").replace(Dn,""))),n.appendChild(i),R(n,"error",{error:t})}};de.into=function(e){if(typeof e=="string"&&(e=document.querySelector(e),e==null))throw new Error("container not found");return function(){return new de(e.appendChild(document.createElement("div")))}};var Pe=new Map,pe=[],tt=pe.map,qn=pe.some,Rn=pe.hasOwnProperty,I="https://cdn.jsdelivr.net/npm/",In=/^((?:@[^/@]+\/)?[^/@]+)(?:@([^/]+))?(?:\/(.*))?$/,Un=/^\d+\.\d+\.\d+(-[\w-.+]+)?$/,Kt=/\.[^/]*$/,Fn=["unpkg","jsdelivr","browser","main"],G=class extends Error{constructor(t){super(t)}};G.prototype.name=G.name;function $n(e){for(let t of Fn){let r=e[t];if(typeof r=="string")return Kt.test(r)?r:`${r}.js`}}function Zt(e){let t=In.exec(e);return t&&{name:t[1],version:t[2],path:t[3]}}function Jt(e){let t=`${I}${e.name}${e.version?`@${e.version}`:""}/package.json`,r=Pe.get(t);return r||Pe.set(t,r=fetch(t).then(n=>{if(!n.ok)throw new G("unable to load package.json");return n.redirected&&!Pe.has(n.url)&&Pe.set(n.url,r),n.json()})),r}async function Bn(e,t){if(e.startsWith(I)&&(e=e.substring(I.length)),/^(\w+:)|\/\//i.test(e))return e;if(/^[.]{0,2}\//i.test(e))return new URL(e,t??location).href;if(!e.length||/^[\s._]/.test(e)||/\s$/.test(e))throw new G("illegal name");let r=Zt(e);if(!r)return`${I}${e}`;if(!r.version&&t!=null&&t.startsWith(I)){let i=await Jt(Zt(t.substring(I.length)));r.version=i.dependencies&&i.dependencies[r.name]||i.peerDependencies&&i.peerDependencies[r.name]}if(r.path&&!Kt.test(r.path)&&(r.path+=".js"),r.path&&r.version&&Un.test(r.version))return`${I}${r.name}@${r.version}/${r.path}`;let n=await Jt(r);return`${I}${n.name}@${n.version}/${r.path||$n(n)||"index.js"}`}var ee=De(Bn);function De(e){let t=new Map,r=i(null);function n(a){if(typeof a!="string")return a;let f=t.get(a);return f||t.set(a,f=new Promise((c,p)=>{let d=document.createElement("script");d.onload=()=>{try{c(pe.pop()(i(a)))}catch(_){p(new G("invalid module"))}d.remove()},d.onerror=()=>{p(new G("unable to load module")),d.remove()},d.async=!0,d.src=a,window.define=er,document.head.appendChild(d)})),f}function i(a){return f=>Promise.resolve(e(f,a)).then(n)}function s(a){return De((f,c)=>f in a&&(f=a[f],c=null,typeof f!="string")?f:e(f,c))}function o(a){return arguments.length>1?Promise.all(tt.call(arguments,r)).then(Hn):r(a)}return o.alias=s,o.resolve=e,o}function Hn(e){let t={};for(let r of e)for(let n in r)Rn.call(r,n)&&(r[n]==null?Object.defineProperty(t,n,{get:Gn(r,n)}):t[n]=r[n]);return t}function Gn(e,t){return()=>e[t]}function Wn(e){return e=e+"",e==="exports"||e==="module"}function er(e,t,r){let n=arguments.length;n<2?(r=e,t=[]):n<3&&(r=t,t=typeof e=="string"?[]:e),pe.push(qn.call(t,Wn)?i=>{let s={},o={exports:s};return Promise.all(tt.call(t,a=>(a=a+"",a==="exports"?s:a==="module"?o:i(a)))).then(a=>(r.apply(null,a),o.exports))}:i=>Promise.all(tt.call(t,i)).then(s=>typeof r=="function"?r.apply(null,s):r))}er.amd={};async function me(e){let t=await fetch(await e.url());if(!t.ok)throw new Error(`Unable to load file: ${e.name}`);return t}async function tr(e,t,{array:r=!1,typed:n=!1}={}){let[i,s]=await Promise.all([e.text(),ee("d3-dsv@2.0.0/dist/d3-dsv.min.js")]);return(t==="	"?r?s.tsvParseRows:s.tsvParse:r?s.csvParseRows:s.csvParse)(i,n&&s.autoType)}var rt=class{constructor(t,r){Object.defineProperties(this,{_url:{value:t},name:{value:r,enumerable:!0}})}async url(){return await this._url+""}async blob(){return(await me(this)).blob()}async arrayBuffer(){return(await me(this)).arrayBuffer()}async text(){return(await me(this)).text()}async json(){return(await me(this)).json()}async stream(){return(await me(this)).body}async csv(t){return tr(this,",",t)}async tsv(t){return tr(this,"	",t)}async image(){let t=await this.url();return new Promise((r,n)=>{let i=new Image;new URL(t,document.baseURI).origin!==new URL(location).origin&&(i.crossOrigin="anonymous"),i.onload=()=>r(i),i.onerror=()=>n(new Error(`Unable to load file: ${this.name}`)),i.src=t})}};function rr(e){throw new Error(`File not found: ${e}`)}function qe(e){return Object.assign(t=>{let r=e(t+="");if(r==null)throw new Error(`File not found: ${t}`);return new rt(r,t)},{prototype:rt.prototype})}function nr(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,r}function ir(e,t,r){r==null&&(r=devicePixelRatio);var n=document.createElement("canvas");n.width=e*r,n.height=t*r,n.style.width=e+"px";var i=n.getContext("2d");return i.scale(r,r),i}function or(e,t="untitled",r="Save"){let n=document.createElement("a"),i=n.appendChild(document.createElement("button"));i.textContent=r,n.download=t;async function s(){await new Promise(requestAnimationFrame),URL.revokeObjectURL(n.href),n.removeAttribute("href"),i.textContent=r,i.disabled=!1}return n.onclick=async o=>{if(i.disabled=!0,n.href)return s();i.textContent="Saving\u2026";try{let a=await(typeof e=="function"?e():e);i.textContent="Download",n.href=URL.createObjectURL(a)}catch(a){i.textContent=r}if(o.eventPhase)return s();i.disabled=!1},n}var Re={math:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function sr(e,t){var r=e+="",n=r.indexOf(":"),i;n>=0&&(r=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1));var s=Re.hasOwnProperty(r)?document.createElementNS(Re[r],e):document.createElement(e);if(t)for(var o in t)r=o,n=r.indexOf(":"),i=t[o],n>=0&&(r=o.slice(0,n))!=="xmlns"&&(o=o.slice(n+1)),Re.hasOwnProperty(r)?s.setAttributeNS(Re[r],o,i):s.setAttribute(o,i);return s}function ar(e){var t=document.createElement("input");return e!=null&&(t.type=e),t}function lr(e,t,r){arguments.length===1&&(t=e,e=null);var n=document.createElement("input");return n.min=e=e==null?0:+e,n.max=t=t==null?1:+t,n.step=r==null?"any":r=+r,n.type="range",n}function ur(e){var t=document.createElement("select");return Array.prototype.forEach.call(e,function(r){var n=document.createElement("option");n.value=n.textContent=r,t.appendChild(n)}),t}function cr(e,t){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");return r.setAttribute("viewBox",[0,0,e,t]),r.setAttribute("width",e),r.setAttribute("height",t),r}function fr(e){return document.createTextNode(e)}var Yn=0;function pr(e){return new dr("O-"+(e==null?"":e+"-")+ ++Yn)}function dr(e){this.id=e,this.href=new URL(`#${e}`,location)+""}dr.prototype.toString=function(){return"url("+this.href+")"};var mr={canvas:nr,context2d:ir,download:or,element:sr,input:ar,range:lr,select:ur,svg:cr,text:fr,uid:pr};function hr(e){return new Promise(function(t,r){var n=new FileReader;n.onload=function(){t(n.result)},n.onerror=r,n.readAsArrayBuffer(e)})}function _r(e){return new Promise(function(t,r){var n=new FileReader;n.onload=function(){t(n.result)},n.onerror=r,n.readAsText(e)})}function br(e){return new Promise(function(t,r){var n=new FileReader;n.onload=function(){t(n.result)},n.onerror=r,n.readAsDataURL(e)})}var vr={buffer:hr,text:_r,url:br};function W(){return this}function he(e,t){let r=!1;if(typeof t!="function")throw new Error("dispose is not a function");return{[Symbol.iterator]:W,next:()=>r?{done:!0}:(r=!0,{done:!1,value:e}),return:()=>(r=!0,t(e),{done:!0}),throw:()=>({done:r=!0})}}function*wr(e,t){for(var r,n=-1;!(r=e.next()).done;)t(r.value,++n)&&(yield r.value)}function U(e){let t=!1,r,n,i=e(s);if(i!=null&&typeof i!="function")throw new Error(typeof i.then=="function"?"async initializers are not supported":"initializer returned something, but not a dispose function");function s(a){return n?(n(a),n=null):t=!0,r=a}function o(){return{done:!1,value:t?(t=!1,Promise.resolve(r)):new Promise(a=>n=a)}}return{[Symbol.iterator]:W,throw:()=>({done:!0}),return:()=>(i!=null&&i(),{done:!0}),next:o}}function Er(e){return U(function(t){var r=zn(e),n=gr(e);function i(){t(gr(e))}return e.addEventListener(r,i),n!==void 0&&t(n),function(){e.removeEventListener(r,i)}})}function gr(e){switch(e.type){case"range":case"number":return e.valueAsNumber;case"date":return e.valueAsDate;case"checkbox":return e.checked;case"file":return e.multiple?e.files:e.files[0];case"select-multiple":return Array.from(e.selectedOptions,t=>t.value);default:return e.value}}function zn(e){switch(e.type){case"button":case"submit":case"checkbox":return"click";case"file":return"change";default:return"input"}}function*yr(e,t){for(var r,n=-1;!(r=e.next()).done;)yield t(r.value,++n)}function xr(e){let t,r=[],n=e(i);if(n!=null&&typeof n!="function")throw new Error(typeof n.then=="function"?"async initializers are not supported":"initializer returned something, but not a dispose function");function i(o){return r.push(o),t&&(t(r.shift()),t=null),o}function s(){return{done:!1,value:r.length?Promise.resolve(r.shift()):new Promise(o=>t=o)}}return{[Symbol.iterator]:W,throw:()=>({done:!0}),return:()=>(n!=null&&n(),{done:!0}),next:s}}function*Tr(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0;++n<i;)yield e+n*r}function Ar(e,t){if(!(!isFinite(t=+t)||t<0||t!==t|0)){for(var r,n=-1;!(r=e.next()).done;)if(++n===t)return r.value}}function nt(e){let t=URL.createObjectURL(new Blob([e],{type:"text/javascript"})),r=new Worker(t);return he(r,()=>{r.terminate(),URL.revokeObjectURL(t)})}var Cr={disposable:he,filter:wr,input:Er,map:yr,observe:U,queue:xr,range:Tr,valueAt:Ar,worker:nt};function Y(e,t){return function(r){var n=r[0],i=[],s,o=null,a,f,c,p,d,_,m,w=-1;for(p=1,d=arguments.length;p<d;++p){if(s=arguments[p],s instanceof Node)i[++w]=s,n+="<!--o:"+w+"-->";else if(Array.isArray(s)){for(_=0,m=s.length;_<m;++_)a=s[_],a instanceof Node?(o===null&&(i[++w]=o=document.createDocumentFragment(),n+="<!--o:"+w+"-->"),o.appendChild(a)):(o=null,n+=a);o=null}else n+=s;n+=r[p]}if(o=e(n),++w>0){for(f=new Array(w),c=document.createTreeWalker(o,NodeFilter.SHOW_COMMENT,null,!1);c.nextNode();)a=c.currentNode,/^o:/.test(a.nodeValue)&&(f[+a.nodeValue.slice(2)]=a);for(p=0;p<w;++p)(a=f[p])&&a.parentNode.replaceChild(i[p],a)}return o.childNodes.length===1?o.removeChild(o.firstChild):o.nodeType===11?((a=t()).appendChild(o),a):o}}var Sr=Y(function(e){var t=document.createElement("template");return t.innerHTML=e.trim(),document.importNode(t.content,!0)},function(){return document.createElement("span")});var it="https://cdn.jsdelivr.net/npm/@observablehq/highlight.js@2.0.0/";function Nr(e){return function(){return e("marked@0.3.12/marked.min.js").then(function(t){return Y(function(r){var n=document.createElement("div");n.innerHTML=t(r,{langPrefix:""}).trim();var i=n.querySelectorAll("pre code[class]");return i.length>0&&e(it+"highlight.min.js").then(function(s){i.forEach(function(o){function a(){s.highlightBlock(o),o.parentNode.classList.add("observablehq--md-pre")}s.getLanguage(o.className)?a():e(it+"async-languages/index.js").then(f=>{if(f.has(o.className))return e(it+"async-languages/"+f.get(o.className)).then(c=>{s.registerLanguage(o.className,c)})}).then(a,a)})}),n},function(){return document.createElement("div")})})}}function ot(e){let t;Object.defineProperties(this,{generator:{value:U(r=>void(t=r))},value:{get:()=>e,set:r=>t(e=r)}}),e!==void 0&&t(e)}function*Or(){for(;;)yield Date.now()}function kr(e,t){return new Promise(function(r){setTimeout(function(){r(t)},e)})}var st=new Map;function Vn(e,t){var r=new Promise(function(n){st.delete(t);var i=t-e;if(!(i>0))throw new Error("invalid time");if(i>2147483647)throw new Error("too long to wait");setTimeout(n,i)});return st.set(t,r),r}function _e(e,t){var r;return(r=st.get(e=+e))?r.then(()=>t):(r=Date.now())>=e?Promise.resolve(t):Vn(r,e).then(()=>t)}function Lr(e,t){return _e(Math.ceil((Date.now()+1)/e)*e,t)}var Mr={delay:kr,tick:Lr,when:_e};function at(e,t){if(/^(\w+:)|\/\//i.test(e))return e;if(/^[.]{0,2}\//i.test(e))return new URL(e,t??location).href;if(!e.length||/^[\s._]/.test(e)||/\s$/.test(e))throw new Error("illegal name");return"https://unpkg.com/"+e}function jr(e){return e==null?ee:De(e)}var Pr=Y(function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.innerHTML=e.trim(),t},function(){return document.createElementNS("http://www.w3.org/2000/svg","g")});var Xn=String.raw;function Qn(e){return new Promise(function(t,r){var n=document.createElement("link");n.rel="stylesheet",n.href=e,n.onerror=r,n.onload=t,document.head.appendChild(n)})}function Dr(e){return function(){return Promise.all([e("@observablehq/katex@0.11.1/dist/katex.min.js"),e.resolve("@observablehq/katex@0.11.1/dist/katex.min.css").then(Qn)]).then(function(t){var r=t[0],n=i();function i(s){return function(){var o=document.createElement("div");return r.render(Xn.apply(String,arguments),o,s),o.removeChild(o.firstChild)}}return n.options=i,n.block=i({displayMode:!0}),n})}}function lt(e){return async()=>{let[t,r,n]=await Promise.all(["vega@5.20.2/build/vega.min.js","vega-lite@5.1.0/build/vega-lite.min.js","vega-lite-api@5.0.0/build/vega-lite-api.min.js"].map(i=>e(i)));return n.register(t,r)}}function qr(){return U(function(e){var t=e(document.body.clientWidth);function r(){var n=document.body.clientWidth;n!==t&&e(t=n)}return window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}})}var F=Object.assign(function(t){let r=jr(t);Object.defineProperties(this,Kn({DOM:()=>mr,FileAttachment:()=>rr,Files:()=>vr,Generators:()=>Cr,Inputs:()=>r("@observablehq/inputs@0.8.0/dist/inputs.umd.min.js"),Mutable:()=>ot,Plot:()=>r("@observablehq/plot@0.1.0/dist/plot.umd.min.js"),Promises:()=>Mr,_:()=>r("lodash@4.17.21/lodash.min.js"),d3:()=>r("d3@6.7.0/dist/d3.min.js"),htl:()=>r("htl@0.2.5/dist/htl.min.js"),html:()=>Sr,md:Nr(r),now:Or,require:()=>r,resolve:()=>at,svg:()=>Pr,tex:Dr(r),vl:lt(r),width:qr}))},{resolve:ee.resolve});function Kn(e){return Object.fromEntries(Object.entries(e).map(Zn))}function Zn([e,t]){return[e,{value:t,writable:!0,enumerable:!0}]}function y(e,t){this.message=e+"",this.input=t}y.prototype=Object.create(Error.prototype);y.prototype.name="RuntimeError";y.prototype.constructor=y;function ut(e){return e&&typeof e.next=="function"&&typeof e.return=="function"}function ct(e,t,r){if(typeof t=="function"&&(r=t,t=null),typeof r!="function")throw new Error("invalid observer");t==null&&(t=new F);let{modules:n,id:i}=e,s=new Map,o=new z(t),a=f(i);function f(c){let p=s.get(c);return p||s.set(c,p=o.module()),p}for(let c of n){let p=f(c.id),d=0;for(let _ of c.variables)_.from?p.import(_.remote,_.name,f(_.from)):p===a?p.variable(r(_,d,c.variables)).define(_.name,_.inputs,_.value):p.define(_.name,_.inputs,_.value),++d}return o}var Rr=Array.prototype,Ir=Rr.map,Ur=Rr.forEach;function be(e){return function(){return e}}function ve(e){return e}function Fr(e){return function(){throw e}}function C(){}var we=1,ge=2,Ee=3,V={};function k(e,t,r){r||(r=V),Object.defineProperties(this,{_observer:{value:r,writable:!0},_definition:{value:ft,writable:!0},_duplicate:{value:void 0,writable:!0},_duplicates:{value:void 0,writable:!0},_indegree:{value:NaN,writable:!0},_inputs:{value:[],writable:!0},_invalidate:{value:C,writable:!0},_module:{value:t},_name:{value:null,writable:!0},_outputs:{value:new Set,writable:!0},_promise:{value:Promise.resolve(void 0),writable:!0},_reachable:{value:r!==V,writable:!0},_rejector:{value:Jn(this)},_type:{value:e},_value:{value:void 0,writable:!0},_version:{value:0,writable:!0}})}Object.defineProperties(k.prototype,{_pending:{value:ni,writable:!0,configurable:!0},_fulfilled:{value:ii,writable:!0,configurable:!0},_rejected:{value:oi,writable:!0,configurable:!0},define:{value:ei,writable:!0,configurable:!0},delete:{value:ri,writable:!0,configurable:!0},import:{value:ti,writable:!0,configurable:!0}});function si(e){e._module._runtime._dirty.add(e),e._outputs.add(this)}function ai(e){e._module._runtime._dirty.add(e),e._outputs.delete(this)}function ft(){throw ft}function Jn(e){return function(t){throw t===ft?new y(e._name+" is not defined",e._name):t instanceof Error&&t.message?new y(t.message,e._name):new y(e._name+" could not be resolved",e._name)}}function $r(e){return function(){throw new y(e+" is defined more than once")}}function ei(e,t,r){switch(arguments.length){case 1:{r=e,e=t=null;break}case 2:{r=t,typeof e=="string"?t=null:(t=e,e=null);break}}return dt.call(this,e==null?null:e+"",t==null?[]:Ir.call(t,this._module._resolve,this._module),typeof r=="function"?r:be(r))}function dt(e,t,r){var n=this._module._scope,i=this._module._runtime;if(this._inputs.forEach(ai,this),t.forEach(si,this),this._inputs=t,this._definition=r,this._value=void 0,r===C?i._variables.delete(this):i._variables.add(this),e!==this._name||n.get(e)!==this){var s,o;if(this._name)if(this._outputs.size)n.delete(this._name),o=this._module._resolve(this._name),o._outputs=this._outputs,this._outputs=new Set,o._outputs.forEach(function(a){a._inputs[a._inputs.indexOf(this)]=o},this),o._outputs.forEach(i._updates.add,i._updates),i._dirty.add(o).add(this),n.set(this._name,o);else if((o=n.get(this._name))===this)n.delete(this._name);else if(o._type===Ee)o._duplicates.delete(this),this._duplicate=void 0,o._duplicates.size===1&&(o=o._duplicates.keys().next().value,s=n.get(this._name),o._outputs=s._outputs,s._outputs=new Set,o._outputs.forEach(function(a){a._inputs[a._inputs.indexOf(s)]=o}),o._definition=o._duplicate,o._duplicate=void 0,i._dirty.add(s).add(o),i._updates.add(o),n.set(this._name,o));else throw new Error;if(this._outputs.size)throw new Error;e&&((o=n.get(e))?o._type===Ee?(this._definition=$r(e),this._duplicate=r,o._duplicates.add(this)):o._type===ge?(this._outputs=o._outputs,o._outputs=new Set,this._outputs.forEach(function(a){a._inputs[a._inputs.indexOf(o)]=this},this),i._dirty.add(o).add(this),n.set(e,this)):(o._duplicate=o._definition,this._duplicate=r,s=new k(Ee,this._module),s._name=e,s._definition=this._definition=o._definition=$r(e),s._outputs=o._outputs,o._outputs=new Set,s._outputs.forEach(function(a){a._inputs[a._inputs.indexOf(o)]=s}),s._duplicates=new Set([this,o]),i._dirty.add(o).add(s),i._updates.add(o).add(s),n.set(e,s)):n.set(e,this)),this._name=e}return i._updates.add(this),i._compute(),this}function ti(e,t,r){return arguments.length<3&&(r=t,t=e),dt.call(this,t+"",[r._resolve(e+"")],ve)}function ri(){return dt.call(this,null,[],C)}function ni(){this._observer.pending&&this._observer.pending()}function ii(e){this._observer.fulfilled&&this._observer.fulfilled(e,this._name)}function oi(e){this._observer.rejected&&this._observer.rejected(e,this._name)}function X(e,t=[]){Object.defineProperties(this,{_runtime:{value:e},_scope:{value:new Map},_builtins:{value:new Map([["invalidation",pt],["visibility",mt],...t])},_source:{value:null,writable:!0}})}Object.defineProperties(X.prototype,{_copy:{value:mi,writable:!0,configurable:!0},_resolve:{value:hi,writable:!0,configurable:!0},redefine:{value:li,writable:!0,configurable:!0},define:{value:ui,writable:!0,configurable:!0},derive:{value:pi,writable:!0,configurable:!0},import:{value:ci,writable:!0,configurable:!0},value:{value:di,writable:!0,configurable:!0},variable:{value:fi,writable:!0,configurable:!0},builtin:{value:_i,writable:!0,configurable:!0}});function li(e){var t=this._scope.get(e);if(!t)throw new y(e+" is not defined");if(t._type===Ee)throw new y(e+" is defined more than once");return t.define.apply(t,arguments)}function ui(){var e=new k(we,this);return e.define.apply(e,arguments)}function ci(){var e=new k(we,this);return e.import.apply(e,arguments)}function fi(e){return new k(we,this,e)}async function di(e){var t=this._scope.get(e);if(!t)throw new y(e+" is not defined");return t._observer===V&&(t._observer=!0,this._runtime._dirty.add(t)),await this._runtime._compute(),t._promise}function pi(e,t){var r=new X(this._runtime,this._builtins);return r._source=this,Ur.call(e,function(n){typeof n!="object"&&(n={name:n+""}),n.alias==null&&(n.alias=n.name),r.import(n.name,n.alias,t)}),Promise.resolve().then(()=>{let n=new Set([this]);for(let i of n)for(let s of i._scope.values())if(s._definition===ve){let o=s._inputs[0]._module,a=o._source||o;if(a===this){console.warn("circular module definition; ignoring");return}n.add(a)}this._copy(r,new Map)}),r}function mi(e,t){e._source=this,t.set(this,e);for(let[s,o]of this._scope){var r=e._scope.get(s);if(!(r&&r._type===we))if(o._definition===ve){var n=o._inputs[0],i=n._module;e.import(n._name,s,t.get(i)||(i._source?i._copy(new X(e._runtime,e._builtins),t):i))}else e.define(s,o._inputs.map(bi),o._definition)}return e}function hi(e){var t=this._scope.get(e),r;if(!t)if(t=new k(ge,this),this._builtins.has(e))t.define(e,be(this._builtins.get(e)));else if(this._runtime._builtin._scope.has(e))t.import(e,this._runtime._builtin);else{try{r=this._runtime._global(e)}catch(n){return t.define(e,Fr(n))}r===void 0?this._scope.set(t._name=e,t):t.define(e,be(r))}return t}function _i(e,t){this._builtins.set(e,t)}function bi(e){return e._name}var vi=typeof requestAnimationFrame=="function"?requestAnimationFrame:setImmediate,pt={},mt={};function z(e=new F,t=wi){var r=this.module();if(Object.defineProperties(this,{_dirty:{value:new Set},_updates:{value:new Set},_computing:{value:null,writable:!0},_init:{value:null,writable:!0},_modules:{value:new Map},_variables:{value:new Set},_disposed:{value:!1,writable:!0},_builtin:{value:r},_global:{value:t}}),e)for(var n in e)new k(ge,r).define(n,[],e[n])}Object.defineProperties(z,{load:{value:ct,writable:!0,configurable:!0}});Object.defineProperties(z.prototype,{_compute:{value:yi,writable:!0,configurable:!0},_computeSoon:{value:xi,writable:!0,configurable:!0},_computeNow:{value:Ti,writable:!0,configurable:!0},dispose:{value:gi,writable:!0,configurable:!0},module:{value:Ei,writable:!0,configurable:!0},fileAttachments:{value:qe,writable:!0,configurable:!0}});function gi(){this._computing=Promise.resolve(),this._disposed=!0,this._variables.forEach(e=>{e._invalidate(),e._version=NaN})}function Ei(e,t=C){let r;if(e===void 0)return(r=this._init)?(this._init=null,r):new X(this);if(r=this._modules.get(e),r)return r;this._init=r=new X(this),this._modules.set(e,r);try{e(this,t)}finally{this._init=null}return r}function yi(){return this._computing||(this._computing=this._computeSoon())}function xi(){var e=this;return new Promise(function(t){vi(function(){t(),e._disposed||e._computeNow()})})}function Ti(){var e=[],t,r;t=new Set(this._dirty),t.forEach(function(i){i._inputs.forEach(t.add,t);let s=ki(i);s>i._reachable?this._updates.add(i):s<i._reachable&&i._invalidate(),i._reachable=s},this),t=new Set(this._updates),t.forEach(function(i){i._reachable?(i._indegree=0,i._outputs.forEach(t.add,t)):(i._indegree=NaN,t.delete(i))}),this._computing=null,this._updates.clear(),this._dirty.clear(),t.forEach(function(i){i._outputs.forEach(Ci)});do{for(t.forEach(function(i){i._indegree===0&&e.push(i)});r=e.pop();)Ni(r),r._outputs.forEach(n),t.delete(r);t.forEach(function(i){Ai(i)&&(Oi(i,new y("circular definition")),i._outputs.forEach(Si),t.delete(i))})}while(t.size);function n(i){--i._indegree==0&&e.push(i)}}function Ai(e){let t=new Set(e._inputs);for(let r of t){if(r===e)return!0;r._inputs.forEach(t.add,t)}return!1}function Ci(e){++e._indegree}function Si(e){--e._indegree}function Li(e){return e._promise.catch(e._rejector)}function ht(e){return new Promise(function(t){e._invalidate=t})}function Mi(e,t){let r=typeof IntersectionObserver=="function"&&t._observer&&t._observer._node,n=!r,i=C,s=C,o,a;return r&&(a=new IntersectionObserver(([f])=>(n=f.isIntersecting)&&(o=null,i())),a.observe(r),e.then(()=>(a.disconnect(),a=null,s()))),function(f){return n?Promise.resolve(f):a?(o||(o=new Promise((c,p)=>(i=c,s=p))),o.then(()=>f)):Promise.reject()}}function Ni(e){e._invalidate(),e._invalidate=C,e._pending();var t=e._value,r=++e._version,n=null,i=e._promise=Promise.all(e._inputs.map(Li)).then(function(s){if(e._version===r){for(var o=0,a=s.length;o<a;++o)switch(s[o]){case pt:{s[o]=n=ht(e);break}case mt:{n||(n=ht(e)),s[o]=Mi(n,e);break}}return e._definition.apply(t,s)}}).then(function(s){return ut(s)?e._version!==r?void s.return():((n||ht(e)).then(Pi(s)),ji(e,r,i,s)):s});i.then(function(s){e._version===r&&(e._value=s,e._fulfilled(s))},function(s){e._version===r&&(e._value=void 0,e._rejected(s))})}function ji(e,t,r,n){function i(){var s=new Promise(function(o){o(n.next())}).then(function(o){return o.done?void 0:Promise.resolve(o.value).then(function(a){if(e._version===t)return Br(e,a,s).then(i),e._fulfilled(a),a})});s.catch(function(o){e._version===t&&(Br(e,void 0,s),e._rejected(o))})}return new Promise(function(s){s(n.next())}).then(function(s){if(!s.done)return r.then(i),s.value})}function Br(e,t,r){var n=e._module._runtime;return e._value=t,e._promise=r,e._outputs.forEach(n._updates.add,n._updates),n._compute()}function Oi(e,t){e._invalidate(),e._invalidate=C,e._pending(),++e._version,e._indegree=NaN,(e._promise=Promise.reject(t)).catch(C),e._value=void 0,e._rejected(t)}function Pi(e){return function(){e.return()}}function ki(e){if(e._observer!==V)return!0;var t=new Set(e._outputs);for(let r of t){if(r._observer!==V)return!0;r._outputs.forEach(t.add,t)}return!1}function wi(e){return window[e]}function cl(){window.DATAFLOW_STDLIB||(window.DATAFLOW_STDLIB={constants:{},dependency:{}}),window.DATAFLOW_STDLIB.constants||(window.DATAFLOW_STDLIB.constants={}),window.DATAFLOW_STDLIB.dependency||(window.DATAFLOW_STDLIB.dependency={});let e=new F,t=Object.assign(e,{html:()=>vt,svg:()=>wt},window.DATAFLOW_STDLIB.constants);for(let[r,n]of Object.entries(window.DATAFLOW_STDLIB.dependency))for(let[i,s]of Object.entries(n)){let o=t[r];Object.defineProperty(t,i,{writable:!0,enumerable:!0,value:typeof o=="function"?s(o()):o.then(a=>s(a))})}return t}export{de as Inspector,cl as Library,z as Runtime};
